<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Arabic Mandi</title>
</head>
<header class="fixed-top">
  <mat-toolbar color="acent" class="mat-toolbar-single-row">

    <div fxShow="true" fxHide.gt-sm="false" fxHide.lt-md="true">
      <button class="profile-icon-container" mat-icon-button [matMenuTriggerFor]="menu">
        <img *ngIf="!_userData?.profile_img" src="../../../assets/carousel/bg1.jpeg" alt="User Image"
          class="user-image" />
        <img *ngIf="_userData?.profile_img" [src]="_userData?.profile_img" alt="User Image" class="user-image" />
      </button>
      <mat-menu #menu="matMenu">
        <button class="profile-icon-container" mat-icon-button>
          <img *ngIf="!_userData?.profile_img" src="../../../assets/carousel/bg1.jpeg" alt="User Image"
            class="user-image" />
          <img *ngIf="_userData?.profile_img" [src]="_userData?.profile_img" alt="User Image" class="user-image" />
        </button>
        <!-- <button mat-menu-item>Profile</button> -->
        <h3 mat-menu-item *ngIf="isCurrentUserAvailable()" readonly>WellCome {{_userData?.name}}</h3>
        <button mat-menu-item (click)="login()" *ngIf="!isCurrentUserAvailable()">Login_Admin</button>
        <button mat-menu-item (click)="logOut()" *ngIf="isCurrentUserAvailable()">Logout</button>
        <!-- Add more menu items as needed -->
      </mat-menu>
    </div>
    <div fxShow="true" fxHide.gt-sm="true" fxHide.lt-md="false">
      <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
        <mat-icon>menu</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button class="profile-icon-container" mat-icon-button>
          <img *ngIf="!_userData?.profile_img" src="../../../assets/carousel/bg1.jpeg" alt="User Image"
            class="user-image" />
          <img *ngIf="_userData?.profile_img" [src]="_userData?.profile_img" alt="User Image" class="user-image" />
        </button>
        <!-- <button mat-menu-item>Profile</button> -->
        <h3 mat-menu-item *ngIf="isCurrentUserAvailable()" readonly>WellCome {{_userData?.name}}</h3>
        <button mat-menu-item (click)="login()" *ngIf="!isCurrentUserAvailable()">Login_Admin</button>
        <button mat-menu-item (click)="logOut()" *ngIf="isCurrentUserAvailable()">Logout</button>
        <!-- Add more menu items as needed -->
      </mat-menu>
    </div>
    <span class="example-spacer"></span>
    <div class="custom-search" fxHide.lt-md="false">
      <!-- <input matInput type="search" placeholder="Search" [formControl]="globalSearchItems"> -->
      <input matInput type="search" placeholder="Search" [formControl]="globalSearchItems" (keydown)="onKeyDown($event)">
    </div>
    <span class="example-spacer"></span>
    <div fxShow="true" fxHide.lt-md="true">
      <ng-container *ngFor="let item of menuItems">
        <a *ngIf="!item.child && item.permissions && item.permissions.includes(_userRole)" mat-button
          [routerLink]="[item.link]">
          <ng-container *ngIf="item.header !== false; else regular">
            <h1 class="title">{{ item.label }}</h1>
          </ng-container>
          <ng-template #regular>
            {{ item.label }}
          </ng-template>
        </a>

        <!-- <ng-container *ngIf="item.child && item.permissions && item.permissions.includes(_userRole)">
          <button mat-button [matMenuTriggerFor]="childMenu">
            <ng-container *ngIf="item.header !== false; else regular">
              <h1 class="title">{{ item.label }}</h1>
            </ng-container>
            <ng-template #regular>
              {{ item.label }}
            </ng-template>
          </button>

          <mat-menu #childMenu="matMenu">
            <ng-container *ngFor="let childItem of item.child">
              <button mat-menu-item [routerLink]="[childItem.link]"
                *ngIf="childItem.permissions && childItem.permissions.includes(_userRole)">
                <mat-icon>{{ childItem.icon }}</mat-icon>
                <div>{{ childItem.label }}</div>
              </button>
            </ng-container>
          </mat-menu>
        </ng-container> -->
      </ng-container>
    </div>
    <span class="example-spacer" fxHide.gt-sm="true"></span>
    <h1 class="title" fxShow="true" fxHide.gt-sm="true">Arabic Mandi</h1>
    <span class="example-spacer" fxHide.gt-sm="false"></span>

  </mat-toolbar>
  <div class="background">
    <div *ngIf="filteredData.length > 0 && globalSearchItems.value !== ''" class="searchBar">
      <mat-option *ngFor="let item of filteredData; let i = index" [class.selected]="i === selectedIndex"
      (click)="selectOption(item)">{{ item.name }}</mat-option>
    </div>
    <mat-option *ngIf="!filteredData.length  && globalSearchItems.value !== '' " class="searchBar">
      No data
    </mat-option>
  </div>
</header>

<body>
  <div fxLayout="column" fxLayoutAlign="center stretch" style="min-height: calc(100vh - 100px);">
    <div class="content">
      <router-outlet></router-outlet>
      <section class="rights">
        <Copy-Rights></Copy-Rights>
      </section>
    </div>
  </div>
</body>
<span class="example-spacer"></span>
<footer class="fixed-bottom">
  <mat-toolbar color="warn" fxLayout="row" fxLayoutAlign="space-around center">
    <ng-container *ngFor="let item of menuItems">
      <ng-container *ngIf="hasPermission(item.permissions)">
        <button mat-icon-button class="example-icon" [routerLink]="[item.link]"
          aria-label="Example icon-button with menu icon"
          *ngIf="!item.child && item.header === false && !item.submenu === true && hasPermission(item.permissions)">
          <div class="icon-container">
            <mat-icon>{{ item.icon }}</mat-icon>
            <div class="button-label">{{ item.label }}</div>
          </div>
        </button>

        <button mat-icon-button class="example-icon" [routerLink]="[item.link]"
          aria-label="Example icon-button with menu icon"
          *ngIf="!item.child && item.header === false && item.submenu && hasPermission(['user'])">
          <div class="icon-container">
            <mat-icon>{{ item.icon }}</mat-icon>
            <div class="button-label">{{ item.label }}</div>
          </div>
        </button>

        <ng-container *ngIf="item.child">
          <button mat-icon-button class="example-icon" aria-label="Example icon-button with menu icon"
            [matMenuTriggerFor]="childMenu">
            <div class="icon-container">
              <mat-icon>{{ item.icon }}</mat-icon>
              <div class="button-label">{{ item.label }}</div>
            </div>
          </button>

          <mat-menu #childMenu="matMenu">
            <ng-container *ngFor="let childItem of item.child">
              <button mat-menu-item [routerLink]="[childItem.link]" *ngIf="hasPermission(childItem.permissions)">
                {{ childItem.label }}
              </button>
            </ng-container>
          </mat-menu>
        </ng-container>
      </ng-container>
    </ng-container>

    <button mat-icon-button class="example-icon" [matMenuTriggerFor]="moreMenu"
      aria-label="Example icon-button with menu icon" *ngIf="hasPermission(['admin'])">
      <div class="icon-container">
        <mat-icon>more_vert</mat-icon>
        <span class="button-label">View</span>
      </div>
    </button>
    <mat-menu #moreMenu="matMenu">
      <ng-container *ngFor="let subItem of menuItems">
        <button mat-menu-item [routerLink]="[subItem.link]"
          *ngIf="subItem.submenu && hasPermission(subItem.permissions)">
          <mat-icon>{{ subItem.icon }}</mat-icon>
          <div>{{ subItem.label }}</div>
        </button>
      </ng-container>
    </mat-menu>
  </mat-toolbar>
</footer>

</html>