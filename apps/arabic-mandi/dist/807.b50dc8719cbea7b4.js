"use strict";(self.webpackChunkarabic_mandi=self.webpackChunkarabic_mandi||[]).push([[807],{1807:(st,v,m)=>{m.r(v),m.d(v,{CreateOrderModule:()=>nt});var u=m(6814),y=m(1896),l=m(6223),e=m(5879),f=m(7700),Z=m(7394),b=m(636),C=m(2939),p=m(2296),d=m(9157),x=m(2032);let q=(()=>{class t{constructor(a,o,n,s,r){this.dialogRef=a,this.data=o,this._fb=n,this._createService=s,this._snackBar=r,this.subs=new Z.w0,this.categoryCreated=new e.vpe,this.responce={},this.newCategory=this._fb.group({category_name:["",l.kI.required]})}onSubmitHandler(a){this.newCategory.valid&&this.subs.add(this._createService.addSingleCategory({foodCategory:{name:a.category_name}}).subscribe(n=>{this.responce={...n},this.closeModal(),this._snackBar.open("Category Has Been Added")},n=>{this.newCategory.reset(),this.newCategory.setErrors(l.kI.required),this._snackBar.open("Category Is Already exited")}))}ngOnDestroy(){this.subs.unsubscribe()}ngOnInit(){}closeModal(){this.subs.unsubscribe(),this.dialogRef.close(this.responce)}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(f.so),e.Y36(f.WI),e.Y36(l.qu),e.Y36(b.g),e.Y36(C.ux))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["food-create-dailog-view"]],outputs:{categoryCreated:"categoryCreated"},decls:17,vars:1,consts:[["tabindex","-1","aria-labelledby","foodDetailsModalLabel",1,"modal","fade","show",2,"display","block","background","rgba(0, 0, 0, 0.5)"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","foodDetailsModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[2,"flex-direction","row","box-sizing","border-box","display","flex","place-content","center space-between","align-items","center"],[3,"formGroup"],["matInput","","formControlName","category_name","placeholder","name"],["mat-raised-button","","color","warn",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),e._uU(5,"Food Item Details"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.closeModal()}),e.qZA()(),e.TgZ(7,"div",6)(8,"section",7)(9,"form",8)(10,"mat-form-field")(11,"mat-label"),e._uU(12," Category Name"),e.qZA(),e._UZ(13,"input",9),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"button",10),e.NdJ("click",function(){return n.onSubmitHandler(n.newCategory.value)}),e._uU(16,"Add Category"),e.qZA()()()()()()()),2&o&&(e.xp6(9),e.Q6J("formGroup",n.newCategory))},dependencies:[p.lW,d.KE,d.hX,x.Nt,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u],encapsulation:2})}return t})();m(92);var U=m(5619),w=m(3620),A=m(4664),O=m(3680),I=m(617),_=m(7988),D=m(5940),S=m(8525),N=m(2599),c=m(5313),h=m(1545),Y=m(2596);const J=["stepper"];function F(t,i){1&t&&(e.TgZ(0,"div",25),e._UZ(1,"mat-spinner"),e.qZA())}function Q(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"mat-option",26),e.NdJ("onSelectionChange",function(){const s=e.CHM(a).$implicit,r=e.oxw();return e.KtG(r.onSelectCategory(s))}),e._uU(1),e.qZA()}if(2&t){const a=i.$implicit;e.Q6J("value",a.name),e.xp6(1),e.hij(" ",a.name," ")}}function V(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Please Select Category. "),e.qZA())}function k(t,i){1&t&&e._UZ(0,"img",27)}function M(t,i){1&t&&e._UZ(0,"img",28)}function H(t,i){1&t&&e._uU(0,"Item Name")}function B(t,i){1&t&&e._uU(0,"Price & Attach Image")}function G(t,i){if(1&t&&e._UZ(0,"img",29),2&t){const a=e.oxw();let o;e.Q6J("src",null==(o=a.secondFormGroup.get("img"))?null:o.value,e.LSH)}}function R(t,i){1&t&&e._uU(0,"Draft Save")}function z(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.onItemUpdateHandler())}),e._uU(1,"Update"),e.qZA()}}function $(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.onSubmitHandler())}),e._uU(1,"Save To Draft"),e.qZA()}}function L(t,i){1&t&&(e.TgZ(0,"h3"),e._uU(1,"Draft Table "),e.qZA())}function j(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.onDraftHandler())}),e.TgZ(1,"mat-icon",33),e._uU(2,"save"),e.qZA(),e._uU(3," Save "),e.qZA()}}function P(t,i){1&t&&(e.TgZ(0,"th",45),e._uU(1,"Image"),e.qZA())}function E(t,i){if(1&t&&e._UZ(0,"img",48),2&t){const a=e.oxw().$implicit;e.Q6J("src",a.img,e.LSH)}}function K(t,i){if(1&t&&(e.TgZ(0,"td",46),e.YNc(1,E,1,1,"img",47),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Q6J("ngIf",a.img)}}function X(t,i){1&t&&(e.TgZ(0,"th",45),e._uU(1,"Category"),e.qZA())}function W(t,i){if(1&t&&(e.TgZ(0,"td",46),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Oqu(a.InitialCategory)}}function ee(t,i){1&t&&(e.TgZ(0,"th",45),e._uU(1,"Name"),e.qZA())}function te(t,i){if(1&t&&(e.TgZ(0,"td",46),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Oqu(a.name)}}function ae(t,i){1&t&&(e.TgZ(0,"th",45),e._uU(1,"Price"),e.qZA())}function ne(t,i){if(1&t&&(e.TgZ(0,"td",46),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Oqu(a.price)}}function oe(t,i){1&t&&(e.TgZ(0,"th",45),e._uU(1,"type"),e.qZA())}function ie(t,i){1&t&&e._UZ(0,"img",28)}function re(t,i){1&t&&e._UZ(0,"img",27)}function se(t,i){if(1&t&&(e.TgZ(0,"td",46),e.YNc(1,ie,1,0,"img",9),e.YNc(2,re,1,0,"img",8),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Q6J("ngIf",a.type),e.xp6(1),e.Q6J("ngIf",!a.type)}}function le(t,i){1&t&&(e.TgZ(0,"th",45),e._uU(1,"Actions"),e.qZA())}function me(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"td",46)(1,"button",49)(2,"mat-icon",33),e._uU(3,"more_horiz"),e.qZA()(),e.TgZ(4,"mat-menu",50,51)(6,"button",52),e.NdJ("click",function(){const s=e.CHM(a).$implicit,r=e.oxw(2);return e.KtG(r.onSetFormUpdateHandler(s))}),e.TgZ(7,"mat-icon",33),e._uU(8,"edit"),e.qZA(),e._uU(9," Update "),e.qZA(),e.TgZ(10,"button",53),e.NdJ("click",function(){const s=e.CHM(a).$implicit,r=e.oxw(2);return e.KtG(r.onDeleteHandler(s))}),e.TgZ(11,"mat-icon",33),e._uU(12,"delete"),e.qZA(),e._uU(13," Delete "),e.qZA()()()}if(2&t){const a=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",a)}}function ce(t,i){1&t&&e._UZ(0,"tr",54)}function de(t,i){1&t&&e._UZ(0,"tr",55)}function ge(t,i){if(1&t&&(e.TgZ(0,"table",34),e.ynx(1,35),e.YNc(2,P,2,0,"th",36),e.YNc(3,K,2,1,"td",37),e.BQk(),e.ynx(4,38),e.YNc(5,X,2,0,"th",36),e.YNc(6,W,2,1,"td",37),e.BQk(),e.ynx(7,39),e.YNc(8,ee,2,0,"th",36),e.YNc(9,te,2,1,"td",37),e.BQk(),e.ynx(10,40),e.YNc(11,ae,2,0,"th",36),e.YNc(12,ne,2,1,"td",37),e.BQk(),e.ynx(13,41),e.YNc(14,oe,2,0,"th",36),e.YNc(15,se,3,2,"td",37),e.BQk(),e.ynx(16,42),e.YNc(17,le,2,0,"th",36),e.YNc(18,me,14,1,"td",37),e.BQk(),e.YNc(19,ce,1,0,"tr",43),e.YNc(20,de,1,0,"tr",44),e.qZA()),2&t){const a=e.oxw();e.Q6J("dataSource",a.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns)}}let pe=(()=>{class t{constructor(a,o,n,s,r){this._fb=a,this._dialog=o,this.cdr=n,this._snackBar=s,this._createService=r,this.subs=new Z.w0,this.nextId=1,this.dataSetChange$=new U.X({filter:{},sorting:[]}),this.selectedCategoryId=null,this.isLoading=!1,this.isHorizontal=!1,this.draftItems=[],this.displayedColumns=["category","image","name","price","type","actions"],this.submitStatus=!0,this.slideValue=!1,this.firstCategory=this._fb.group({InitialCategory:["",l.kI.required]}),this.firstFormGroup=this._fb.group({name:["",l.kI.required]}),this.secondFormGroup=this._fb.group({price:["",l.kI.required],img:[""],gst:[""]}),this.imagePreview=null}ngOnInit(){this.updateStepperMode(),this.subscribeCategoryChanges()}ngOnChanges(a){}onResize(a){this.updateStepperMode()}subscribeCategoryChanges(){this.subs.add(this.dataSetChange$.pipe((0,w.b)(500),(0,A.w)(a=>this._createService.find(a))).subscribe(({data:a})=>{this.isLoading=!1,a?.foodCategories&&(this.dataSet=a.foodCategories)}))}onSlideToggleChange(a){this.slideValue=a.checked}onSubmitHandler(){if(this.firstFormGroup.valid&&this.secondFormGroup.valid&&this.firstCategory.valid){const a={id:this.nextId++,type:this.slideValue,cId:this.selectedCategoryId,...this.firstCategory.value,...this.firstFormGroup.value,...this.secondFormGroup.value};console.log(a);const o=this.draftItems.findIndex(n=>n.id===a.id);-1!==o?(this.draftItems[o]=a,this._snackBar.open("Draft item has been Updated")):(this.draftItems.push(a),this._snackBar.open("New Draft item has been added")),this.dataSource=[...this.draftItems],setTimeout(()=>{this.resetFormData()},2e3),this.stepper.reset()}else this.firstCategory.get("InitialCategory")?.invalid&&this.firstCategory.get("InitialCategory")?.markAsTouched()}createCategoryHandlerDailog(){this._dialog.open(q,{data:{canCreate:!0}}).afterClosed().subscribe(o=>{if(o&&o.createOneFoodCategory){const n=Array.from(this.dataSet).concat({__typename:o.createOneFoodCategory.__typename,id:o.createOneFoodCategory.id,name:o.createOneFoodCategory.name});this.dataSet=n,this.firstCategory.patchValue({InitialCategory:o.createOneFoodCategory.name})}})}onSelectCategory(a){this.selectedCategoryId=a?.id,this.categoryItem=a?.name}onDeleteHandler(a){const o=this.draftItems.indexOf(a);-1!==o&&(this.draftItems.splice(o,1),0===this.draftItems.length?(this.stepper.reset(),this.resetFormData(),this.updateStatus=!1,this.submitStatus=!0):(this.updateStatus=!1,this.submitStatus=!0,this.dataSource=[...this.draftItems],this.cdr.detectChanges(),this.dataSource=this.draftItems))}onSetFormUpdateHandler(a){this.resetFormData(),this.updateStatus=!0,this.submitStatus=!1,a&&(this.ItemId=a.id,this.firstFormGroup.setValue({name:a.name}),this.firstCategory.setValue({InitialCategory:a.InitialCategory}),this.secondFormGroup.setValue({price:a.price,img:a.img,gst:a.gst}))}onItemUpdateHandler(){if(this.firstFormGroup.valid&&this.secondFormGroup.valid&&this.firstCategory.valid){const a={id:this.ItemId,type:this.slideValue,cId:this.selectedCategoryId,...this.firstCategory.value,...this.firstFormGroup.value,...this.secondFormGroup.value},o=this.draftItems.findIndex(n=>n.id===a.id);-1!==o&&(this.draftItems[o]=a,this.dataSource=this.draftItems,this._snackBar.open("Item has been Updated"),this.resetFormData(),this.stepper.reset(),this.updateStatus=!1,this.submitStatus=!0)}}onDraftHandler(){const a=this._createService.getCurrentUser();null!==a&&(this.draftSave=this.draftItems.map(o=>{let n;return null!==o.img&&(n=o.img),{category:{id:o.cId},image_data:n,name:o.name,price:o.price,createdby:a,type:this.slideValue}}),this._createService.updateManyItems(this.draftSave),this.stepper.reset(),this.dataSource=[],this.draftItems=[],location.reload())}resetFormData(){this.firstCategory.setValue({InitialCategory:this.categoryItem}),this.firstFormGroup.reset(),this.secondFormGroup.reset()}updateStepperMode(){this.isHorizontal=window.innerWidth>768}onFileSelected(a){const o=a.target.files[0],n=.0488;if(o)if(o.size/1048576>n)this.secondFormGroup.get("img")?.setValue(null),alert(`File size exceeds the limit of ${n} MB`);else{const r=new FileReader;r.onload=ot=>{this.imagePreview=r.result,this.secondFormGroup.get("img")?.setValue(r.result)};const g=r.readAsDataURL(o);console.log(g)}}ngOnDestroy(){this.subs.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(l.qu),e.Y36(f.uw),e.Y36(e.sBO),e.Y36(C.ux),e.Y36(b.g))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["food-create-order"]],viewQuery:function(o,n){if(1&o&&e.Gf(J,5),2&o){let s;e.iGM(s=e.CRH())&&(n.stepper=s.first)}},hostBindings:function(o,n){1&o&&e.NdJ("resize",function(r){return n.onResize(r)},!1,e.Jf7)},features:[e.TTD],decls:77,vars:18,consts:[["style","\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 24px;\n  ",4,"ngIf"],[3,"formGroup"],["placeholder","Favorite food","formControlName","InitialCategory","required",""],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-raised-button","","matTooltip","Add New Category ","matTooltipPosition","after",2,"margin-left","5px",3,"click"],[2,"display","flex","justify-content","space-between"],["color","primary",3,"change"],["src","../../../../../assets/icon_veg_nonveg/icons8-non-veg-30.png","alt","Vegetables Image","style","width: 24px; height: 24px; margin-left: 8px;",4,"ngIf"],["src","../../../../../assets/icon_veg_nonveg/icons8-veg-32.png","alt","Meat Image","style","width: 24px; height: 24px; margin-left: 8px;",4,"ngIf"],["linear","",3,"orientation"],["stepper",""],[3,"stepControl"],["matStepLabel",""],["matInput","","formControlName","name","placeholder","Name"],["mat-button","","matStepperNext",""],["matInput","","type","number","formControlName","price","maxlength","5","placeholder","Price","value","","required",""],["alt","Selected Image","style","max-width: 100%; max-height: 200px;",3,"src",4,"ngIf"],["type","file","accept",".jpg,.jpeg,.png","id","imageUpload","value","",3,"change"],["mat-button","","matStepperPrevious",""],["mat-button","",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["class","flex-end","mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"table-Over-Flow-Globle"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],[2,"display","flex","justify-content","center","align-items","center","padding","24px"],[3,"value","onSelectionChange"],["src","../../../../../assets/icon_veg_nonveg/icons8-non-veg-30.png","alt","Vegetables Image",2,"width","24px","height","24px","margin-left","8px"],["src","../../../../../assets/icon_veg_nonveg/icons8-veg-32.png","alt","Meat Image",2,"width","24px","height","24px","margin-left","8px"],["alt","Selected Image",2,"max-width","100%","max-height","200px",3,"src"],["mat-button","",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",1,"flex-end",3,"click"],[1,"material-icons-outlined"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","name"],["matColumnDef","price"],["matColumnDef","type"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["alt","Image","style","max-width: 100px; max-height: 100px;",3,"src",4,"ngIf"],["alt","Image",2,"max-width","100px","max-height","100px",3,"src"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"condensed-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,n){if(1&o&&(e.YNc(0,F,2,0,"div",0),e._UZ(1,"br"),e.TgZ(2,"div")(3,"h3"),e._uU(4,"Create Item"),e.qZA(),e.TgZ(5,"form",1)(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Category"),e.qZA(),e.TgZ(9,"mat-select",2),e.YNc(10,Q,2,2,"mat-option",3),e.qZA(),e.YNc(11,V,2,0,"mat-error",4),e.qZA(),e.TgZ(12,"button",5),e.NdJ("click",function(){return n.createCategoryHandlerDailog()}),e.TgZ(13,"mat-icon"),e._uU(14,"add"),e.qZA()()(),e.TgZ(15,"div",6)(16,"div")(17,"mat-label"),e._uU(18,"Food Type"),e.qZA(),e.TgZ(19,"mat-slide-toggle",7),e.NdJ("change",function(r){return n.onSlideToggleChange(r)}),e._uU(20),e.qZA(),e.YNc(21,k,1,0,"img",8),e.YNc(22,M,1,0,"img",9),e.qZA(),e._UZ(23,"div"),e.qZA()(),e._UZ(24,"br"),e.TgZ(25,"mat-stepper",10,11)(27,"mat-step",12)(28,"form",1),e.YNc(29,H,1,0,"ng-template",13),e._UZ(30,"br"),e.TgZ(31,"mat-form-field")(32,"mat-label"),e._uU(33,"Name"),e.qZA(),e._UZ(34,"input",14),e.qZA(),e._UZ(35,"br"),e.TgZ(36,"div")(37,"button",15),e._uU(38,"Next"),e.qZA()()()(),e.TgZ(39,"mat-step",12)(40,"form",1),e.YNc(41,B,1,0,"ng-template",13),e._UZ(42,"br"),e.TgZ(43,"mat-form-field")(44,"mat-label"),e._uU(45,"Price"),e.qZA(),e._UZ(46,"input",16),e.qZA(),e._UZ(47,"br"),e.TgZ(48,"mat-label"),e._uU(49,"Image"),e.qZA(),e.TgZ(50,"div")(51,"div"),e.YNc(52,G,1,1,"img",17),e.qZA(),e.TgZ(53,"input",18),e.NdJ("change",function(r){return n.onFileSelected(r)}),e.qZA()(),e._UZ(54,"br")(55,"br"),e.TgZ(56,"div")(57,"button",19),e._uU(58,"Back"),e.qZA(),e.TgZ(59,"button",15),e._uU(60,"Next"),e.qZA()()()(),e.TgZ(61,"mat-step"),e.YNc(62,R,1,0,"ng-template",13),e.TgZ(63,"div"),e._UZ(64,"br"),e.TgZ(65,"button",19),e._uU(66,"Back"),e.qZA(),e.YNc(67,z,2,0,"button",20),e.YNc(68,$,2,0,"button",21),e.qZA()()(),e._UZ(69,"br"),e.TgZ(70,"div")(71,"div",6),e.YNc(72,L,2,0,"h3",4),e.YNc(73,j,4,0,"button",22),e.qZA(),e._UZ(74,"br"),e.TgZ(75,"section",23),e.YNc(76,ge,21,3,"table",24),e.qZA()()),2&o){let s,r;e.Q6J("ngIf",n.isLoading),e.xp6(5),e.Q6J("formGroup",n.firstCategory),e.xp6(5),e.Q6J("ngForOf",n.dataSet),e.xp6(1),e.Q6J("ngIf",null==(s=n.firstCategory.get("InitialCategory"))?null:s.hasError("required")),e.xp6(9),e.hij(" ",n.slideValue?"Veg":"Non-Veg"," "),e.xp6(1),e.Q6J("ngIf",!n.slideValue),e.xp6(1),e.Q6J("ngIf",n.slideValue),e.xp6(3),e.Q6J("orientation",n.isHorizontal?"horizontal":"vertical"),e.xp6(2),e.Q6J("stepControl",n.firstFormGroup),e.xp6(1),e.Q6J("formGroup",n.firstFormGroup),e.xp6(11),e.Q6J("stepControl",n.secondFormGroup),e.xp6(1),e.Q6J("formGroup",n.secondFormGroup),e.xp6(12),e.Q6J("ngIf",null==(r=n.secondFormGroup.get("img"))?null:r.value),e.xp6(15),e.Q6J("ngIf",n.updateStatus),e.xp6(1),e.Q6J("ngIf",n.submitStatus),e.xp6(4),e.Q6J("ngIf",null==n.draftItems?null:n.draftItems.length),e.xp6(1),e.Q6J("ngIf",null==n.draftItems?null:n.draftItems.length),e.xp6(3),e.Q6J("ngIf",null==n.draftItems?null:n.draftItems.length)}},dependencies:[u.sg,u.O5,O.ey,p.lW,p.RK,d.KE,d.hX,d.TO,I.Hw,x.Nt,_.VK,_.OP,_.p6,D.Ou,S.gD,N.Rr,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,h.C0,h.VY,h.Vq,h.Ic,h.fd,Y.gM,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,l.nD,l.sg,l.u]})}return t})();var T=m(9288),ue=m(5015);function fe(t,i){if(1&t&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("value",a.name),e.xp6(1),e.hij(" ",a.name," ")}}function _e(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Please Select Category. "),e.qZA())}function he(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Please Select Category. "),e.qZA())}function Ce(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Please Select Category. "),e.qZA())}function Ze(t,i){if(1&t&&e._UZ(0,"img",27),2&t){const a=e.oxw();e.Q6J("src",a.imageUrl,e.LSH)}}function be(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.removeImage())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function xe(t,i){1&t&&e._UZ(0,"img",29)}function ye(t,i){1&t&&e._UZ(0,"img",30)}function Ie(t,i){1&t&&(e.TgZ(0,"div",31),e._uU(1,"InActive"),e.qZA())}function Te(t,i){1&t&&(e.TgZ(0,"div",32),e._uU(1,"Active"),e.qZA())}let ve=(()=>{class t{constructor(a,o,n,s,r){this.dialogRef=a,this.data=o,this._fb=n,this._createService=s,this._snackBar=r,this.subs=new Z.w0,this.dataSetChange$=new U.X({filter:{},sorting:[]}),this.imageUrl=null,this.updatedItem=this._fb.group({category:["",l.kI.required],name:["",l.kI.required],offer:[""],price:[0,l.kI.required],img:[""],type:[!1],status:[!0]}),this.subscribeCategoryChanges()}subscribeCategoryChanges(){this.subs.add(this.dataSetChange$.pipe((0,w.b)(500),(0,A.w)(a=>this._createService.find(a))).subscribe(({data:a})=>{if(this.data.name&&a?.foodCategories){const o=a.foodCategories,n=this.data.category.name.toLowerCase(),s=a.foodCategories.find(r=>r.name.toLowerCase()===n);this.slideValue=this.data.type,this.imageUrl=this.data.image_data,this.status=this.data.status,this.updatedItem.patchValue({category:s?.name.toString(),name:this.data.name,offer:this.data.offer,price:parseInt(this.data.price),type:this.data.type,status:this.data.status}),this.dataSet=o}}))}handleFileInput(a){const o=a.target.files[0],n=.0488;if(o)if(o.size/1048576>n)this.updatedItem.get("img")?.setValue(null),alert(`File size exceeds the limit of ${n} kB`);else{const r=new FileReader;r.onload=g=>{this.imageUrl=r.result,this.updatedItem.get("img")?.setValue(r.result)},r.readAsDataURL(o)}}onSlideToggleChange(a){this.updatedItem.get("type")?.setValue(a.checked),this.slideValue=a.checked}onStatusToggleChange(a){this.updatedItem.get("status")?.setValue(a.checked),this.status=a.checked}onSubmitHandler(){const a=this.updatedItem.value,o=a.category?.toString().toLowerCase(),n=this.dataSet.find(s=>s.name.toLowerCase()===o);if(this.updatedItem.valid){const s={id:n?.id,name:n?.name},r=this._createService.getCurrentUser();if(r&&r.id){const g=String(r.id),it={id:parseInt(g,10)};this._createService.updateSingleItem({id:this.data.id,update:{category:s,image_data:""===a.img?this.imageUrl:a.img,name:a.name,offer:a.offer,price:a.price,type:a.type,updatedby:it,status:a.status}})?this.dialogRef.close(!0):this.dialogRef.close(!1)}else console.error("Invalid or missing user ID")}}removeImage(){this.imageUrl=null,this.updatedItem.get("img")?.setValue("");const a=document.getElementById("imageUpload");a&&(a.value="")}ngOnDestroy(){this.subs.unsubscribe()}ngOnInit(){}closeModal(){this.subs.unsubscribe(),this.dialogRef.close()}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(f.so),e.Y36(f.WI),e.Y36(l.qu),e.Y36(b.g),e.Y36(C.ux))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["update-dailog-view"]],decls:58,vars:12,consts:[["tabindex","-1","aria-labelledby","foodDetailsModalLabel",1,"modal","fade","show",2,"display","block","background","rgba(0, 0, 0, 0.5)"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","foodDetailsModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[2,"flex-direction","row","box-sizing","border-box","display","flex","place-content","center space-between","align-items","center"],[3,"formGroup"],["placeholder","Favorite food","formControlName","category","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","formControlName","name","placeholder","name"],["matInput","","formControlName","offer","placeholder","offer"],["matInput","","type","number","formControlName","price","placeholder","price"],["alt","Selected Image","style","max-width: 100px; max-height: 100px;",3,"src",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["type","file","accept",".jpg,.jpeg,.png","id","imageUpload",3,"change"],[2,"display","flex","justify-content","space-between"],["color","primary","formControlName","type",3,"change"],["src","../../../../../assets/icon_veg_nonveg/icons8-non-veg-30.png","alt","Vegetables Image","style","width: 24px; height: 24px; margin-left: 8px;",4,"ngIf"],["src","../../../../../assets/icon_veg_nonveg/icons8-veg-32.png","alt","Meat Image","style","width: 24px; height: 24px; margin-left: 8px;",4,"ngIf"],["color","primary","formControlName","status",3,"change"],["class","red-dot",4,"ngIf"],["class","green-dot",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[3,"value"],["alt","Selected Image",2,"max-width","100px","max-height","100px",3,"src"],["mat-icon-button","","color","warn",3,"click"],["src","../../../../../assets/icon_veg_nonveg/icons8-non-veg-30.png","alt","Vegetables Image",2,"width","24px","height","24px","margin-left","8px"],["src","../../../../../assets/icon_veg_nonveg/icons8-veg-32.png","alt","Meat Image",2,"width","24px","height","24px","margin-left","8px"],[1,"red-dot"],[1,"green-dot"]],template:function(o,n){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),e._uU(5,"Update Item"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.closeModal()}),e.qZA()(),e.TgZ(7,"div",6)(8,"section",7)(9,"form",8)(10,"div")(11,"div")(12,"mat-form-field")(13,"mat-label"),e._uU(14,"Category"),e.qZA(),e.TgZ(15,"mat-select",9),e.YNc(16,fe,2,2,"mat-option",10),e.qZA(),e.YNc(17,_e,2,0,"mat-error",11),e.qZA(),e.TgZ(18,"mat-form-field")(19,"mat-label"),e._uU(20," Name"),e.qZA(),e._UZ(21,"input",12),e.YNc(22,he,2,0,"mat-error",11),e.qZA()(),e.TgZ(23,"div")(24,"mat-form-field")(25,"mat-label"),e._uU(26," Offer"),e.qZA(),e._UZ(27,"input",13),e.qZA(),e.TgZ(28,"mat-form-field")(29,"mat-label"),e._uU(30," Price"),e.qZA(),e._UZ(31,"input",14),e.YNc(32,Ce,2,0,"mat-error",11),e.qZA()(),e.TgZ(33,"div")(34,"div"),e.YNc(35,Ze,1,1,"img",15),e.YNc(36,be,3,0,"button",16),e.qZA(),e.TgZ(37,"input",17),e.NdJ("change",function(r){return n.handleFileInput(r)}),e.qZA()(),e.TgZ(38,"div",18)(39,"div")(40,"mat-label"),e._uU(41,"Food Type :"),e.qZA(),e.TgZ(42,"mat-slide-toggle",19),e.NdJ("change",function(r){return n.onSlideToggleChange(r)}),e._uU(43),e.qZA(),e.YNc(44,xe,1,0,"img",20),e.YNc(45,ye,1,0,"img",21),e.qZA(),e._UZ(46,"div"),e.qZA(),e.TgZ(47,"div",18)(48,"div")(49,"mat-label"),e._uU(50,"Status Item :"),e.qZA(),e.TgZ(51,"mat-slide-toggle",22),e.NdJ("change",function(r){return n.onStatusToggleChange(r)}),e.qZA(),e.YNc(52,Ie,2,0,"div",23),e.YNc(53,Te,2,0,"div",24),e.qZA(),e._UZ(54,"div"),e.qZA(),e._UZ(55,"br"),e.TgZ(56,"button",25),e.NdJ("click",function(){return n.onSubmitHandler()}),e._uU(57,"Update"),e.qZA()()()()()()()()),2&o){let s,r,g;e.xp6(9),e.Q6J("formGroup",n.updatedItem),e.xp6(7),e.Q6J("ngForOf",n.dataSet),e.xp6(1),e.Q6J("ngIf",null==(s=n.updatedItem.get("category"))?null:s.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(r=n.updatedItem.get("name"))?null:r.hasError("required")),e.xp6(10),e.Q6J("ngIf",null==(g=n.updatedItem.get("price"))?null:g.hasError("required")),e.xp6(3),e.Q6J("ngIf",n.imageUrl),e.xp6(1),e.Q6J("ngIf",n.imageUrl),e.xp6(7),e.hij(" ",n.slideValue?"Veg":"Non-Veg"," "),e.xp6(1),e.Q6J("ngIf",!n.slideValue),e.xp6(1),e.Q6J("ngIf",n.slideValue),e.xp6(7),e.Q6J("ngIf",!n.status),e.xp6(1),e.Q6J("ngIf",n.status)}},dependencies:[u.sg,u.O5,O.ey,p.lW,p.RK,d.KE,d.hX,d.TO,I.Hw,x.Nt,S.gD,N.Rr,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,l.sg,l.u],styles:[".red-dot[_ngcontent-%COMP%]{color:red}.green-dot[_ngcontent-%COMP%]{color:green}"]})}return t})();var Ue=m(4079);function we(t,i){1&t&&(e.TgZ(0,"th",19),e._uU(1,"Image"),e.qZA())}function Ae(t,i){if(1&t&&e._UZ(0,"img",23),2&t){const a=e.oxw().$implicit;e.Q6J("src",a.image_data,e.LSH)}}function Oe(t,i){1&t&&e._UZ(0,"img",24)}function Se(t,i){if(1&t&&(e.TgZ(0,"td",20),e.YNc(1,Ae,1,1,"img",21),e.YNc(2,Oe,1,0,"img",22),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Q6J("ngIf",a.image_data),e.xp6(1),e.Q6J("ngIf",!a.image_data)}}function Ne(t,i){1&t&&(e.TgZ(0,"th",19),e._uU(1,"Name"),e.qZA())}function qe(t,i){if(1&t&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Oqu(a.name)}}function De(t,i){1&t&&(e.TgZ(0,"th",19),e._uU(1,"Offer"),e.qZA())}function Ye(t,i){if(1&t&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Oqu(a.offer)}}function Je(t,i){1&t&&(e.TgZ(0,"th",19),e._uU(1,"Category"),e.qZA())}function Fe(t,i){if(1&t&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Oqu(a.category.name)}}function Qe(t,i){1&t&&(e.TgZ(0,"th",19),e._uU(1,"Price"),e.qZA())}function Ve(t,i){if(1&t&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.xp6(1),e.Oqu(a.price)}}function ke(t,i){1&t&&(e.TgZ(0,"th",19),e._uU(1,"Status"),e.qZA())}function Me(t,i){1&t&&(e.ynx(0),e._uU(1," Inactive "),e.BQk())}function He(t,i){1&t&&e._uU(0," Active ")}function Be(t,i){if(1&t&&(e.TgZ(0,"td",20),e.YNc(1,Me,2,0,"ng-container",25),e.YNc(2,He,1,0,"ng-template",null,26,e.W1O),e.qZA()),2&t){const a=i.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!a.status)("ngIfElse",o)}}function Ge(t,i){1&t&&(e.TgZ(0,"th",19),e._uU(1,"Type"),e.qZA())}function Re(t,i){1&t&&(e.ynx(0),e._UZ(1,"img",28),e.BQk())}function ze(t,i){1&t&&e._UZ(0,"img",29)}function $e(t,i){if(1&t&&(e.TgZ(0,"td",20),e.YNc(1,Re,2,0,"ng-container",25),e.YNc(2,ze,1,0,"ng-template",null,27,e.W1O),e.qZA()),2&t){const a=i.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!a.type)("ngIfElse",o)}}function Le(t,i){1&t&&(e.TgZ(0,"th",19),e._uU(1,"Actions"),e.qZA())}function je(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"td",20)(1,"button",30)(2,"mat-icon",31),e._uU(3,"more_horiz"),e.qZA()(),e.TgZ(4,"mat-menu",32,33)(6,"button",34),e.NdJ("click",function(){const s=e.CHM(a).$implicit,r=e.oxw();return e.KtG(r.onUpdateHandler(s))}),e.TgZ(7,"mat-icon",31),e._uU(8,"edit"),e.qZA(),e._uU(9," Update "),e.qZA(),e.TgZ(10,"button",35),e.NdJ("click",function(){const s=e.CHM(a).$implicit,r=e.oxw();return e.KtG(r.onDeleteHandler(s.id))}),e.TgZ(11,"mat-icon",31),e._uU(12,"delete"),e.qZA(),e._uU(13," Delete "),e.qZA()()()}if(2&t){const a=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",a)}}function Pe(t,i){1&t&&e._UZ(0,"tr",36)}function Ee(t,i){1&t&&e._UZ(0,"tr",37)}const We=[{path:"",pathMatch:"full",canActivate:[T.u],component:(()=>{class t{constructor(a,o,n,s){this._snakbar=a,this._orderservice=o,this.apollo=n,this._dialog=s,this.subs=new Z.w0,this.searchItems=new l.NI(null),this.displayedColumns=["image","name","category","price","offer","status","type","actions"]}ngAfterViewInit(){this.getData()}ngOnInit(){let a=[];this.subs.add(this.searchItems.valueChanges.subscribe(o=>{0===a.length&&(a=this.dataSource),this.dataSource=o?a.filter(n=>{const s=String(n.category.name).toLowerCase(),r=String(o).toLowerCase();return s.includes(r)}):a}))}getData(){this.apollo.query({query:ue.ZP`
        query get {
          getItems {
            id
            name
            offer
            price
            type
            status
            image_data
            category {
              id
              isActive
              name
            }
            createdby {
              id
              role
            }
          }
        }
      `}).subscribe(({data:a})=>{this.dataSource=a.getItems},a=>{console.log(a)})}onDeleteHandler(a){this._orderservice.removeSingleItem({id:a}),setTimeout(()=>{this.ngAfterViewInit()},500)}onUpdateHandler(a){this._dialog.open(ve,{data:a}).afterClosed().subscribe(n=>{n&&setTimeout(()=>{this.getData()},500)})}ngOnDestroy(){this.subs.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(C.ux),e.Y36(b.g),e.Y36(Ue._M),e.Y36(f.uw))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["food-view-order"]],decls:39,vars:4,consts:[[2,"flex-direction","row","box-sizing","border-box","display","flex","place-content","center space-between","align-items","center"],[2,"width","200px","height","75px"],["matPrefix","",1,"material-icons-outlined"],["matInput","","placeholder","FindCategory",3,"formControl"],["mat-flat-button","","color","primary","routerLink","create_item"],[1,"table-Over-Flow-Globle"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","offer"],["matColumnDef","category"],["matColumnDef","price"],["matColumnDef","status"],["matColumnDef","type"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["alt","Image","style","max-width: 100px; max-height: 100px;",3,"src",4,"ngIf"],["src","../../../../../assets/defaultimg.jpg","alt","Image","style","max-width: 100px; max-height: 100px;",4,"ngIf"],["alt","Image",2,"max-width","100px","max-height","100px",3,"src"],["src","../../../../../assets/defaultimg.jpg","alt","Image",2,"max-width","100px","max-height","100px"],[4,"ngIf","ngIfElse"],["activeStatus",""],["vegStatus",""],["src","../../../../../assets/icon_veg_nonveg/icons8-non-veg-30.png","alt","Vegetables Image",2,"width","24px","height","24px","margin-left","8px"],["src","../../../../../assets/icon_veg_nonveg/icons8-veg-32.png","alt","Vegetables Image",2,"width","24px","height","24px","margin-left","8px"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"material-icons-outlined"],[1,"condensed-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,n){1&o&&(e.TgZ(0,"section",0)(1,"div")(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Search"),e.qZA(),e.TgZ(5,"mat-icon",2),e._uU(6,"search"),e.qZA(),e._UZ(7,"input",3),e.qZA()(),e.TgZ(8,"div")(9,"button",4),e._uU(10," Create "),e.qZA()()(),e.TgZ(11,"section",5)(12,"table",6),e.ynx(13,7),e.YNc(14,we,2,0,"th",8),e.YNc(15,Se,3,2,"td",9),e.BQk(),e.ynx(16,10),e.YNc(17,Ne,2,0,"th",8),e.YNc(18,qe,2,1,"td",9),e.BQk(),e.ynx(19,11),e.YNc(20,De,2,0,"th",8),e.YNc(21,Ye,2,1,"td",9),e.BQk(),e.ynx(22,12),e.YNc(23,Je,2,0,"th",8),e.YNc(24,Fe,2,1,"td",9),e.BQk(),e.ynx(25,13),e.YNc(26,Qe,2,0,"th",8),e.YNc(27,Ve,2,1,"td",9),e.BQk(),e.ynx(28,14),e.YNc(29,ke,2,0,"th",8),e.YNc(30,Be,4,2,"td",9),e.BQk(),e.ynx(31,15),e.YNc(32,Ge,2,0,"th",8),e.YNc(33,$e,4,2,"td",9),e.BQk(),e.ynx(34,16),e.YNc(35,Le,2,0,"th",8),e.YNc(36,je,14,1,"td",9),e.BQk(),e.YNc(37,Pe,1,0,"tr",17),e.YNc(38,Ee,1,0,"tr",18),e.qZA()()),2&o&&(e.xp6(7),e.Q6J("formControl",n.searchItems),e.xp6(5),e.Q6J("dataSource",n.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[u.O5,y.rH,p.lW,p.RK,d.KE,d.hX,d.qo,I.Hw,x.Nt,_.VK,_.OP,_.p6,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,l.Fj,l.JJ,l.oH],styles:[".icon[_ngcontent-%COMP%]{padding:0!important;box-sizing:content-box}.button_action[_ngcontent-%COMP%]:hover{background-color:red}.mat-mdc-table[_ngcontent-%COMP%]{--mat-table-row-item-outline-width: 1px;table-layout:auto;white-space:normal;width:100%;background-color:var(--mat-table-background-color)}"]})}return t})()},{path:"create_item",component:pe,canActivate:[T.u]},{path:"update_item",component:(()=>{class t{constructor(){}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["food-update-order"]],decls:1,vars:0,template:function(o,n){1&o&&e._uU(0,"update")},encapsulation:2})}return t})(),canActivate:[T.u]}];let et=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#a=this.\u0275inj=e.cJS({imports:[y.Bz.forChild(We),y.Bz]})}return t})();var tt=m(5310),at=m(130);let nt=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#a=this.\u0275inj=e.cJS({imports:[u.ez,et,at.q,tt.I,C.ZX,h.T5]})}return t})()}}]);